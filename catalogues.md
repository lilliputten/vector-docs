> $Id: catalogues.md 10430 2018-08-01 10:43:07Z miheev $
> $Date: 2018-08-01 13:43:07 +0300 (Ср, 01 авг 2018) $

Структура каталогов проекта
===========================

## Верхний уровень (`WEB_TINTS/`)

- `_docs`: Документация
- `_html`: Различные примеры реализации html решений и макетов собственно системы. (???)
- `_tmp`: Помойка для временных экспериментов и устаревших материалов. (?)
- `_tools`: Инструменты для работы с прототипом проекта (от Андрея Полевого?).
- `release`: Рабочий образ серверной части системы (php-код + генеримая клиентская часть) (см. ниже).
- `source`: Исходный код клиентской части (см. ниже).
- `test`: Эксперименты. (?)

## Серверная часть (`WEB_TINTS/release`)

- `.saved-reports`: Папка для сохранения отчётов. См. переменную конфигурации
  `SAVED_REPORTS_PATH` (в
  `WEB_TINTS/release/core/scripts/php/app/config/config_constants.php`).
- `ADAuth`: Серверная авторизация.
- `ADAuthErr`: Переадресация при ошибке авторизации. (?)
- `application`: Основное phalcon-приложение. Отвечает за авторизацию,
  предоставление разметки SPA-приложения, предоставление клиенту данных
  словарей/ресурсов, сохранение отчётов (?). См. конфигурацию приложения:
   - `WEB_TINTS/release/application/scripts/php/app/config/config.php`.
- `element-dc`, `element-tcm`, `element-umto`: Три "приложения" системы. См.
  соотв. конфигурации:
   - `WEB_TINTS/release/element-dc/scripts/php/app/config/config.php`
   - `WEB_TINTS/release/element-tcm/scripts/php/app/config/config.php`
   - `WEB_TINTS/release/element-umto/scripts/php/app/config/config.php`
- `core`: "Ядро" системы (см. ниже).

## Ядро серверной части (`WEB_TINTS/release/core`)

- `css`: Стили. В том числе `css/bem` для генерации из исходников.
- `js`: Стили. В том числе `js/bem` для генерации из исходников и `js/bemjson` для генеримых снапшотов bem-пакетов.
- `libs`: Библиотеки.
    - `libs/bem`: генеримые из `source/libs` и `source/libs-dev` библиотеки (см. gulfile-перменные `LIBS_FILES` и `LIBS_DEV_FILES`).
    - `libs/bem-blocks-assets`: Ресурсы извлечённые во время обработки bem-блоков из `source/blocks`.
- `fake-pages`: Демо-страницы. (См. описание демо страниц в меню.)
- `i`: Изображения для статического html.
    - `i/NavHeader`: Единственное, что используется сейчас -- изображения для шапки системы (варианты лого, фон).
- `p`: ???
- `static`: Статические ресурсы для загрузки в систему (копируются во время команды `gulp copyStatic` из `WEB_TINTS/source/static`). (Сейчас -- на 2018.07.31 -- только аудио-файлы для сигналов уведомления оператора.)
- `scripts`: Исходные коды/библиотеки phalcon/php. В том числе:
    - `nodejs/low_info_gas`: Код и библиотеки промежуточного приложения для работы с сервером данных.
    - `php`: Код и библиотеки phalcon/php сервера (см. ниже).

## Код и библиотеки phalcon/php сервера (`WEB_TINTS/release/core/scripts/php`)

- `app`: Стандартное дерево приложения phalcon:
    - `cache`: Кеш. В репозитории не сохраняется.
    - `config`: Конфигурация.
    - `controllers`: Контроллеры.
    - `library/Library`: Библиотечные модули.
    - `logs`: Логи. В репозитории не сохраняется.
    - `models`: Модели.
    - `plugins`: Модули плагинов.
    - `views`: Представления. Не используются.
- `app-config`: Конфигурация для SPA-приложения. Описания страниц.
- `thrift`: ???
- `vendor`: Зависимости `composer`.

## Исходный код клиентской части (`WEB_TINTS/source`)

- `!Patches`: Заплатки к библиотечным или npm-модулям. См. [Изменения в коде библиотек](libs-patching.md).
- `.bem/templates`: Шаблоны для утилиты `bem-create` (автоматизированное создание блоков-элементов-модификаторов).
- `.enb`: Конфигурация и расширения сборки `enb`. См. [Сборка enb](enb-make.md)
- `00-bem-templates`: Шаблоны для создания блоков-элементов-модификаторов при помощи консольных утилит `bem-block`, `bem-elem`, `bem-mod`, `bem-mod-val` (см. `source/utils/sbin` -- предположительно запускаются из папки `%HOME%/sbin`).
- `blocks`: Основной исходный код компонент системы (блоков).
- `blocks.specs`: Генеримая папка (в репозиторий не включается) для проведения модульных тестов (после завершения тестов может быть удалена).
- `fake-data`: Данные для эмуляции работы приложения данных (`WEB_TINTS/release/core/scripts/nodejs/low_info_gas`).
- `fake-pages`: Копия папки с демо-страницами для работы локального сервера.
- `libs`: Библиотеки. В репозиторий не включается. Разворачивается из последнего архива `!ARC-YYMMDD-libs-vNN.zip`.
- `libs-arc`: Архивы с текущими/прошлыми версиями используемых библиотек.
- `libs-dev`: Собственные (поддерживаемые библиотеки).
- `node_modules`: npm-модули зависимостей, описанных в `package.json`. Обычно разворачиваются из последнего архива `!ARC-YYMMDD-node_modules-vNN.zip`.
- `pages`: Описания пакетов (бандлов). В репозиории хранятся только исходные файлы вида `pages/{PkgName}/{PkgName}.bemjson`. Остальное игнорируется средствами svn (после создания нового пакета надо обновлять свойства `svn:ignore` для созданной папки + проверять в репозитории на сервере).
- `static`: Статические ресурсы, копируемые во время `gulp init` (`copyStatic`).
- `utils`: Различные утилиты командной строки для работы с проектом.

